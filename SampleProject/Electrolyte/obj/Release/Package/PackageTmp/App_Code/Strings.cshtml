@functions {
    public static string GetLink(string Text, string Url)
    {
        //<li @if (Authenticate.IsPath("")) { class="active" }>@Html.ActionLink("Home", "Index", "Home")<div class="arrow-up"></div></li>
        string result = "<li";
        bool active = false;
        if (IsPath(Url)) 
        {
            active = true;
            result += " class=\"active\"";
        }

        if (Url == "") Url = "/";
        Url = GetBaseURL() + Url;
        result += "><a href=\"" + Url + "\">" + Text + "</a>";
            
        if (active) 
        {
            result += "<div class=\"arrow-up\"></div>";
        }
        
        result += "</li>";
        
        return result;
    }

    public static string GetRawLink(string Text, string Url)
    {
        if (Url == "") Url = "/";
        string result = "<a href=\"" + GetBaseURL() + Url + "\">" + Text + "</a>";

        return result;
    }

    public static bool IsPath(string path)
    {
        string url = Request.Url.ToString().Substring(GetBaseURL().Length);

        if (url == path) return true;

        return false;
    }

    public static string GetBaseURL()
    {
        return Request.Url.Scheme + "://" + Request.Url.Authority + Request.ApplicationPath.TrimEnd('/') + "/";
    }
}